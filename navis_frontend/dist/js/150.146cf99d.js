"use strict";(self["webpackChunklogistics"]=self["webpackChunklogistics"]||[]).push([[150],{17150:(t,e,s)=>{s.r(e),s.d(e,{default:()=>nt});s(68309),s(26699),s(32023);var i=s(73396),n=s(87139),l=s(35010),a=s(80797),c={class:"flex"},r={class:"w-10/12"},o={class:"pl-6 pr-6 font-base"},p={class:"font-base mt-5"},d={class:"text-gray-400 text-sm"},h={class:"text-violet-600"},u={class:"text-2xl"},m={class:"text-xs text-gray-500"},f={class:"grid font-base mt-3 grid-cols-2 gap-y-4 gap-4"},x={class:"bg-white rounded-md pb-2"},v={class:"flex font-base justify-between ml-5 mr-5 mt-3"},_=(0,i._)("h3",{class:"text-xl"},"Truck load",-1),b={class:"text-violet-600 text-2xl"},g={class:"flex justify-between ml-5 mr-5 mt-5 text-lg"},w={class:"text-gray-500 flex font-base flex-col gap-5"},y=(0,i._)("p",null,"Available,kg",-1),k={class:"text-gray-900"},P=(0,i._)("img",{class:"w-3/4",src:a,alt:""},null,-1),S={class:"relative mt-3 font-base overflow-x-auto"},z=(0,i._)("h3",{class:"ml-6 font-extrabold underline"},"Parcels in this shipment",-1),A={class:"w-full mt-3 text-xs text-left text-gray-500 font-base accent-violet-600"},D=(0,i._)("thead",{class:"text-xs text-gray-700 uppercase bg-white border-b"},[(0,i._)("tr",null,[(0,i._)("th",{scope:"col",class:"px-6 py-3"}," Parcel number "),(0,i._)("th",{scope:"col",class:"px-6 py-3"}," Weight "),(0,i._)("th",{scope:"col",class:"px-6 py-3"}," destination ")])],-1),C={class:"bg-white border-b font-base"},Z={scope:"row",class:"px-6 py-4 font-medium text-gray-900 whitespace-nowrap"},L={class:"px-6 py-4"},Y={class:"px-6 py-4"},j={class:"flex justify-between mr-5 mt-5 ml-5 text-sm font-base"},I={class:"bg-white rounded-md pb-5"},M={class:"flex items-center justify-between font-base ml-3 mt-2 mr-3"},W=(0,i._)("h3",{class:"font-bold"},"Available packages",-1),T={class:"relative mt-2 font-base overflow-x-auto"},F={class:"w-full text-xs text-left text-gray-500 font-base accent-violet-600"},H=(0,i._)("thead",{class:"text-xs text-gray-700 uppercase bg-white border-b"},[(0,i._)("tr",null,[(0,i._)("th",{scope:"col",class:"p-4"},[(0,i._)("div",{class:"flex items-center"},[(0,i._)("input",{id:"checkbox-all-search",type:"checkbox",class:"w-4 h-4 text-violet-600 bg-gray-100 border-gray-300 rounded"}),(0,i._)("label",{for:"checkbox-all-search",class:"sr-only"},"checkbox")])]),(0,i._)("th",{scope:"col",class:"px-6 py-3"}," Parcel number "),(0,i._)("th",{scope:"col",class:"px-6 py-3"}," Weight "),(0,i._)("th",{scope:"col",class:"px-6 py-3"}," destination ")])],-1),K={class:"bg-white border-b font-base"},O={class:"w-4 p-4"},U={class:"flex items-center"},$=["checked","onClick"],E=(0,i._)("label",{for:"checkbox",class:"sr-only"},"checkbox",-1),N={scope:"row",class:"px-6 py-4 font-medium text-gray-900 whitespace-nowrap"},q={class:"px-6 py-4"},B={class:"px-6 py-4"};function G(t,e,s,a,G,J){var Q,R,V,X,tt,et,st,it,nt=(0,i.up)("Aside");return(0,i.wg)(),(0,i.iD)("div",c,[(0,i.Wm)(nt),(0,i._)("div",r,[(0,i._)("div",o,[(0,i._)("div",p,[(0,i._)("h3",d,[(0,i.Uk)("Shipments / "),(0,i._)("span",h,(0,n.zw)(G.shipmentId),1)]),(0,i._)("h1",u,[(0,i.Uk)((0,n.zw)(null===(Q=J.shipment)||void 0===Q?void 0:Q.route_from.name)+" - "+(0,n.zw)(null===(R=J.shipment)||void 0===R?void 0:R.route_to.name)+" ",1),(0,i._)("span",m,(0,n.zw)(J.formatDate(null===(V=J.shipment)||void 0===V?void 0:V.departure_date)),1)])]),(0,i._)("div",f,[(0,i._)("div",x,[(0,i._)("div",v,[_,(0,i._)("h2",b,(0,n.zw)(J.percentageCalculator(null===(X=J.shipment)||void 0===X?void 0:X.loaded_kg,null===(tt=J.shipment)||void 0===tt?void 0:tt.truck.carry_weight))+" %",1)]),(0,i._)("div",g,[(0,i._)("ul",w,[(0,i._)("li",null,[y,(0,i._)("p",k,(0,n.zw)(null===(et=J.shipment)||void 0===et?void 0:et.loaded_kg)+" / "+(0,n.zw)(null===(st=J.shipment)||void 0===st?void 0:st.truck.carry_weight),1)])]),P]),(0,i._)("div",S,[z,(0,i._)("table",A,[D,(0,i._)("tbody",null,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(null===(it=J.shipment)||void 0===it?void 0:it.parcels,(function(t){var e;return(0,i.wg)(),(0,i.iD)("tr",C,[(0,i._)("th",Z,(0,n.zw)(null===t||void 0===t?void 0:t.parcel_number),1),(0,i._)("td",L,(0,n.zw)(null===t||void 0===t?void 0:t.weight),1),(0,i._)("td",Y,(0,n.zw)(null===(e=t.destination)||void 0===e?void 0:e.name),1)])})),256))])])]),(0,i._)("div",j,[(0,i._)("button",{onClick:e[0]||(e[0]=function(){return J.printParcels&&J.printParcels.apply(J,arguments)}),class:"bg-violet-600 text-white py-1.5 px-4 rounded-md text-violet-600"},"Print parcels list"),(0,i._)("button",{onClick:e[1]||(e[1]=function(){return J.finishLoading&&J.finishLoading.apply(J,arguments)}),class:"bg-violet-600 text-white py-1.5 px-4 rounded-md text-violet-600"},"Finish loading")])]),(0,i._)("div",I,[(0,i._)("div",M,[W,(0,i._)("button",{onClick:e[2]||(e[2]=(0,l.iM)((function(){return J.updateShipmentDetails&&J.updateShipmentDetails.apply(J,arguments)}),["prevent"])),class:"bg-violet-600 text-sm py-1 px-4 rounded-md text-white"},"Add selections to truck")]),(0,i._)("div",T,[(0,i._)("table",F,[H,(0,i._)("tbody",null,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(J.parcels,(function(t){return(0,i.wg)(),(0,i.iD)("tr",K,[(0,i._)("td",O,[(0,i._)("div",U,[(0,i._)("input",{checked:J.shipmentParcels.includes(t.id),onClick:function(e){return J.addToParcelList(t)},type:"checkbox",class:"w-4 h-4 text-violet-600 bg-gray-100 border-gray-300 rounded"},null,8,$),E])]),(0,i._)("th",N,(0,n.zw)(t.parcel_number),1),(0,i._)("td",q,(0,n.zw)(t.weight),1),(0,i._)("td",B,(0,n.zw)(t.destination.name),1)])})),256))])])])])])])])])}var J=s(88478),Q=s(95082),R=(s(69826),s(41539),s(57327),s(21249),s(56977),s(57658),s(89554),s(54747),s(82772),s(40561),s(92222),s(64212)),V=s(36797),X=s.n(V),tt=s(20065);const et={name:"Shipment",components:{Aside:R.Z},data:function(){return{shipmentId:null,selectedParcels:[],unselectedParcels:[],cc:""}},computed:(0,Q.Z)((0,Q.Z)({},(0,tt.Se)({storedShipments:"getStoredShipments",storedParcels:"getStoredParcels"})),{},{shipment:function(){var t=this;return this.storedShipments.find((function(e){return e.id==t.shipmentId}))},parcels:function(){var t=this;return this.storedParcels.filter((function(e){var s;return e.destination.id==(null===(s=t.shipment)||void 0===s?void 0:s.route_to.id)}))},shipmentParcels:function(){return this.shipment.parcels.map((function(t){return t.id}))}}),methods:(0,Q.Z)((0,Q.Z)({},(0,tt.nv)({getAllShipments:"getAllShipments",getAllParcels:"getAllParcels",updateShipment:"updateShipment"})),{},{init:function(){this.getAllShipments({cb:function(){}}),this.getAllParcels({cb:function(){}})},formatDate:function(t){return X()(t).format("MMM Do YY")},percentageCalculator:function(t,e){return(t/e*100).toFixed(2)},addToParcelList:function(t){this.shipmentParcels.includes(t.id)?this.unselectedParcels.push(t.id):this.selectedParcels.push(t.id)},updateShipmentDetails:function(){var t=this;this.shipment.truck=this.shipment.truck.id,this.shipment.driver=this.shipment.driver.id,this.shipment.route_from=this.shipment.route_from.id,this.shipment.route_to=this.shipment.route_to.id,this.unselectedParcels.length&&this.unselectedParcels.forEach((function(e){var s=t.shipmentParcels.indexOf(e);s>-1&&t.shipmentParcels.splice(s,1)})),this.shipment.parcels=[].concat((0,J.Z)(this.shipmentParcels),(0,J.Z)(this.selectedParcels)),this.updateShipment({uuid:this.shipment.id,payload:this.shipment,cb:function(){t.init()}})},printParcels:function(){},finishLoading:function(){var t=this;this.shipment["status"]="ON WAY",this.shipment.truck=this.shipment.truck.id,this.shipment.driver=this.shipment.driver.id,this.shipment.route_from=this.shipment.route_from.id,this.shipment.route_to=this.shipment.route_to.id,this.shipment.parcels=this.shipmentParcels,this.updateShipment({uuid:this.shipment.id,payload:this.shipment,cb:function(){t.$router.push({name:"shipments"})}})}}),mounted:function(){this.shipmentId=this.$route.params["id"],this.init()}};var st=s(40089);const it=(0,st.Z)(et,[["render",G]]),nt=it},80797:(t,e,s)=>{t.exports=s.p+"img/van.4cc45d99.svg"}}]);
//# sourceMappingURL=150.146cf99d.js.map